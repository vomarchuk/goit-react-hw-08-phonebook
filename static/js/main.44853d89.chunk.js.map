{"version":3,"sources":["components/NavBar/NavBar.module.css","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/contacts/contacts-operations.js","components/Wrapper/Wrapper.module.css","components/Container/Container.module.css","components/PrivateRoute.js","components/PublicRoute.js","components/Wrapper/Wrapper.js","components/Container/Container.js","components/Section/Section.js","components/AuthNav.js","images/logout.svg","components/UserMenu.js","components/Navigations.js","components/NavBar/NavBar.js","components/App/App.js","redux/contacts/contacts-slice.js","redux/auth/auth-slice.js","redux/store.js","index.js"],"names":["module","exports","axios","defaults","baseURL","token","headers","common","Authorization","fetchCurrentUser","createAsyncThunk","_","thunkAPI","a","state","getState","persisterToken","auth","rejectedWithValue","get","data","userRegister","credentails","post","alert","logIn","authOperations","logOut","authSelectors","getIsLoggedIn","isLoggedIn","getUserName","user","name","getIsFechingCurrent","isFechingCurrent","getAllContacts","addContact","details","removeContact","contactId","delete","contactsOperations","filter","value","PrivateRoute","children","redirectTo","routeProps","useSelector","to","PublicRoute","restricted","shouldRedirect","Wrapper","className","s","wrapper","Container","container","Section","AuthNav","auth_nav","nav_item","UserMenu","userName","dispatch","useDispatch","user_menu","Button","logOutBtn","variant","onClick","type","icon","src","logOutIcon","width","height","alt","Navigations","navigations","NavBar","nav_bar","HomePage","lazy","LoginPage","RegisterPage","ContactsPage","App","useEffect","fallback","exact","path","contactsSlice","createSlice","initialState","items","extraReducers","fulfilled","action","payload","push","item","id","authSlice","email","error","pending","rejected","message","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","autSlice","contacts","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.44853d89.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_bar\":\"NavBar_nav_bar__1hgvk\",\"nav_item\":\"NavBar_nav_item__38viu\",\"user_menu\":\"NavBar_user_menu__GfI1r\",\"logOutBtn\":\"NavBar_logOutBtn__30N8I\"};","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nconst fetchCurrentUser = createAsyncThunk(\n  '/auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persisterToken = state.auth.token;\n    if (persisterToken === null) {\n      return thunkAPI.rejectedWithValue();\n      // return state!;\n    }\n    token.set(persisterToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      return data;\n    } catch (error) {\n      throw error;\n    }\n  },\n);\n\nconst userRegister = createAsyncThunk('auth/register', async credentails => {\n  try {\n    const { data } = await axios.post('/users/signup', credentails);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    alert(\n      'Sorry. A user with that email address already exists, or the email was invalid.',\n    );\n    throw error;\n  }\n});\nconst logIn = createAsyncThunk('auth/login', async credentails => {\n  try {\n    const { data } = await axios.post('/users/login', credentails);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async () => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n  } catch (error) {\n    throw error;\n  }\n});\n\nconst authOperations = {\n  userRegister,\n  logIn,\n  logOut,\n  fetchCurrentUser,\n};\nexport default authOperations;\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\nconst getUserName = state => state.auth.user.name;\nconst getIsFechingCurrent = state => state.auth.isFechingCurrent;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUserName,\n  getIsFechingCurrent,\n};\n\nexport default authSelectors;\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst getAllContacts = createAsyncThunk('contacts', async () => {\n  try {\n    const { data } = await axios.get('/contacts');\n\n    return data;\n  } catch (error) {\n    throw error;\n  }\n});\n\nconst addContact = createAsyncThunk('contacts/add', async details => {\n  try {\n    const { data } = await axios.post('/contacts', details);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n});\n\nconst removeContact = createAsyncThunk('contact/remove', async contactId => {\n  try {\n    await axios.delete(`/contacts/${contactId}`);\n    return contactId;\n  } catch (error) {\n    throw error;\n  }\n});\n\nconst filter = createAsyncThunk('/auth/filter', value => value);\n\nconst contactsOperations = {\n  getAllContacts,\n  addContact,\n  removeContact,\n  filter,\n};\nexport default contactsOperations;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Wrapper_wrapper__acrmz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3RIox\"};","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport authSelectors from '../redux/auth/auth-selectors';\n\nconst PrivateRoute = ({ children, redirectTo = '/', ...routeProps }) => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n};\n\nexport default PrivateRoute;\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport authSelectors from '../redux/auth/auth-selectors';\n\nconst PublicRoute = ({\n  children,\n  restricted = false,\n  redirectTo = '/',\n  ...routeProps\n}) => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n};\nexport default PublicRoute;\n","import s from './Wrapper.module.css';\n\nconst Wrapper = ({ children }) => {\n  return <div className={s.wrapper}>{children}</div>;\n};\nexport default Wrapper;\n","import PropTypes from 'prop-types';\n\nimport s from './Container.module.css';\nconst Container = ({ children }) => {\n  return <div className={s.container}>{children}</div>;\n};\n\nContainer.propTypes = {\n  children: PropTypes.node,\n};\nexport default Container;\n","import Container from '../Container';\n\nconst Section = ({ children }) => {\n  return (\n    <section>\n      <Container>{children}</Container>\n    </section>\n  );\n};\nexport default Section;\n","import { NavLink } from 'react-router-dom';\nimport s from './NavBar/NavBar.module.css';\nconst AuthNav = () => {\n  return (\n    <div className={s.auth_nav}>\n      <NavLink className={`${s.nav_item} `} to=\"/register\">\n        Register\n      </NavLink>\n      <NavLink className={`${s.nav_item} `} to=\"/login\">\n        Login\n      </NavLink>\n    </div>\n  );\n};\n\nexport default AuthNav;\n","export default __webpack_public_path__ + \"static/media/logout.a6eede60.svg\";","import { useDispatch } from 'react-redux';\nimport { useSelector } from 'react-redux';\nimport authSelectors from '../redux/auth/auth-selectors';\nimport authOperations from '../redux/auth/auth-operations';\nimport { Button } from 'react-bootstrap';\nimport logOutIcon from '../images/logout.svg';\nimport s from './NavBar/NavBar.module.css';\nconst UserMenu = () => {\n  const userName = useSelector(authSelectors.getUserName);\n  const dispatch = useDispatch();\n  return (\n    <div className={s.user_menu}>\n      <span className={s.s}>Wellcome, {userName}</span>\n      <Button\n        className={s.logOutBtn}\n        variant=\"danger\"\n        onClick={() => dispatch(authOperations.logOut())}\n        type=\"button\"\n      >\n        <img\n          className={s.icon}\n          src={logOutIcon}\n          width=\"20\"\n          height=\"20\"\n          alt=\"logout button\"\n        />\n      </Button>\n    </div>\n  );\n};\nexport default UserMenu;\n","import { useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport authSelectors from '../redux/auth/auth-selectors';\n\nimport s from './NavBar/NavBar.module.css';\n\nconst Navigations = () => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <nav className={s.navigations}>\n      <NavLink className={s.nav_item} to=\"/\">\n        Home\n      </NavLink>\n      {isLoggedIn && (\n        <NavLink className={s.nav_item} to=\"/contacts\">\n          Contacts\n        </NavLink>\n      )}\n    </nav>\n  );\n};\nexport default Navigations;\n","import { useSelector } from 'react-redux';\nimport authSelectors from '../../redux/auth/auth-selectors';\n\nimport AuthNav from '../AuthNav';\nimport UserMenu from '../UserMenu';\nimport Navigations from '../Navigations';\n\nimport s from './NavBar.module.css';\nconst NavBar = () => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <header className={s.nav_bar}>\n      <Navigations />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n};\n\nexport default NavBar;\n","import { Suspense, lazy } from 'react';\nimport { Switch } from 'react-router';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PrivateRoute from '../PrivateRoute';\nimport PublicRoute from '../PublicRoute';\n\nimport Wrapper from '../Wrapper';\nimport Section from '../Section';\nimport NavBar from '../NavBar';\nimport authOperations from '../../redux/auth/auth-operations';\nimport authSelectors from '../../redux/auth/auth-selectors';\n\nconst HomePage = lazy(() => import('../Page/HomePage'));\nconst LoginPage = lazy(() => import('../Page/LoginPage'));\nconst RegisterPage = lazy(() => import('../Page/RegisterPage'));\nconst ContactsPage = lazy(() => import('../Page/ContactsPage'));\n\nconst App = () => {\n  const isFechingCurrent = useSelector(authSelectors.getIsFechingCurrent);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n  return (\n    !isFechingCurrent && (\n      <Wrapper>\n        <Section>\n          <NavBar />\n        </Section>\n\n        <Suspense fallback={<div>...Loading</div>}>\n          <Section>\n            <Switch>\n              <PublicRoute exact path=\"/\">\n                <HomePage />\n              </PublicRoute>\n\n              <PublicRoute path=\"/register\" restricted redirectTo=\"/contacts\">\n                <RegisterPage />\n              </PublicRoute>\n\n              <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\n                <LoginPage />\n              </PublicRoute>\n\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/\">\n                <ContactsPage />\n              </PrivateRoute>\n            </Switch>\n          </Section>\n        </Suspense>\n      </Wrapper>\n    )\n  );\n};\n\nexport default App;\n","import { createSlice } from '@reduxjs/toolkit';\nimport contactsOperations from './contacts-operations';\n\nconst initialState = {\n  items: null,\n  filter: '',\n};\n\nconst contactsSlice = createSlice({\n  name: 'contacts',\n  initialState,\n  extraReducers: {\n    [contactsOperations.getAllContacts.fulfilled](state, action) {\n      state.items = action.payload;\n    },\n    [contactsOperations.addContact.fulfilled](state, action) {\n      state.items.push(action.payload);\n    },\n    [contactsOperations.removeContact.fulfilled](state, action) {\n      state.items = state.items.filter(item => item.id !== action.payload);\n    },\n    [contactsOperations.filter.fulfilled](state, action) {\n      state.filter = action.payload;\n    },\n  },\n});\n\nexport default contactsSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\n\nimport authOperations from './auth-operations';\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  error: null,\n  isFechingCurrent: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.fetchCurrentUser.pending](state, action) {\n      state.isFechingCurrent = true;\n    },\n    [authOperations.fetchCurrentUser.fulfilled](state, { payload }) {\n      state.user = payload;\n      state.isLoggedIn = true;\n      state.isFechingCurrent = false;\n      state.error = null;\n    },\n    [authOperations.fetchCurrentUser.rejected](state, { error }) {\n      state.isLoggedIn = false;\n      state.isFechingCurrent = false;\n      state.error = error?.message;\n    },\n\n    [authOperations.userRegister.fulfilled](state, { payload }) {\n      state.user = payload.user;\n      state.token = payload.token;\n      state.isLoggedIn = true;\n      state.error = null;\n    },\n    [authOperations.userRegister.rejected](state, { error }) {\n      state.isLoggedIn = false;\n      state.error = error?.message;\n    },\n\n    [authOperations.logIn.fulfilled](state, { payload }) {\n      state.user = payload.user;\n      state.token = payload.token;\n      state.isLoggedIn = true;\n      state.error = null;\n    },\n    [authOperations.logIn.rejected](state, { error }) {\n      state.isLoggedIn = false;\n      state.error = error?.message;\n    },\n\n    [authOperations.logOut.fulfilled](state, action) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n      state.error = null;\n    },\n    [authOperations.logOut.rejected](state, { error }) {\n      state.error = error?.message;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport contactsSlice from './contacts/contacts-slice';\nimport autSlice from './auth/auth-slice';\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, autSlice),\n    contacts: contactsSlice,\n  },\n  middleware: getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n  devTools: process.env.NODE_ENV === 'development',\n});\n\n// export default store;\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport App from './components/App';\nimport { store, persistor } from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n    ,\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}